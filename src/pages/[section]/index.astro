---
import CategorySvelte from '@components/Category.svelte';
import Layout from '@layouts/Layout.astro';
import { CoNexus } from '@lib/conexus';
import type { DynSectionCategory } from '@lib/conexus';

const { section } = Astro.params;

if (!section) {
  Astro.redirect('/');
}

let categories: DynSectionCategory[] = [];
try {
  categories = await CoNexus.sectionCategories(section!);
} catch (error) {
  console.error('Failed to fetch categories:', error);
}
---

<Layout arrow={true}>
  <CategorySvelte {categories} {section} client:load />
</Layout>
