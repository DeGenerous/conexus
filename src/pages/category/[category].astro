---
import CategorySvelte from '@components/Category.svelte';
import Layout from '@layouts/Layout.astro';
import { CoNexus } from '@lib/conexus';
import type { DynTopic } from '@lib/conexus';

const { category } = Astro.params;

if (!category) {
  Astro.redirect('/');
}

let topics: DynTopic[] = [];
try {
  topics = await CoNexus.categoryTopics(category!);
} catch (error) {
  console.error('Failed to fetch topics:', error);
}
---

<Layout arrow={true}>
  <CategorySvelte topics={topics} client:load />
</Layout>
